name: '$(Build.DefinitionName)_$(Build.BuildId)'

trigger: none  # no automatic trigger


pool:
  vmImage: 'ubuntu-latest'

# This pipeline is needed when the Dockerfile is changed
# and the image on Dockerhub should be updated
steps:
  - task: Docker@2
    inputs:
      command: 'buildAndPush'
      Dockerfile: '**/Dockerfile'
      repository: 'naegerr/tradingbot'
      containerRegistry: 'Tradingbot'
      tags: |
        $(Build.BuildId)