name: '$(Build.DefinitionName)_$(Build.BuildId)'

trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

variables:
- group: AlpacaAccess

steps:


  - task: Checkout@1
  - script: |
      echo "Running existing Docker image"
      echo $PAPERAPIKEY
      docker run -p 127.0.0.1:8080:8080 \
      -e APIKEY=$(APIKEY) \
      -e PAPERAPIKEY=$(PAPERAPIKEY) \
      -e PAPERSECRET=$(PAPERSECRET) \
      -e SECRET=$(SECRET) \
      naegerr/tradingbot:82 \
      tradingbot
    displayName: 'Run Docker Image'

